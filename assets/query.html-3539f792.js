import{_ as e,a as o,b as t}from"./otherQuery3-44628526.js";import{_ as p,M as l,p as c,q as i,R as n,t as s,N as u,a1 as r}from"./framework-204010b2.js";const k={},d=n("h1",{id:"query-example",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#query-example","aria-hidden":"true"},"#"),s(" Query Example")],-1),b=n("h2",{id:"use-journal-page-instead-of-scheduled",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#use-journal-page-instead-of-scheduled","aria-hidden":"true"},"#"),s(" Use journal page instead of scheduled")],-1),m={href:"https://github.com/haydenull/logseq-plugin-agenda/issues/19",target:"_blank",rel:"noopener noreferrer"},v=r('<p>note: <img src="'+e+`" alt=""></p><p>The configuration is as follows:</p><p>Query Script:</p><div class="language-clojure line-numbers-mode" data-ext="clojure"><pre class="language-clojure"><code><span class="token punctuation">[</span><span class="token symbol">:find</span> <span class="token punctuation">(</span><span class="token function">pull</span>
  ?block
  <span class="token punctuation">[</span><span class="token symbol">:block/uuid</span>
    <span class="token symbol">:block/parent</span>
    <span class="token symbol">:db/id</span>
    <span class="token symbol">:block/left</span>
    <span class="token symbol">:block/collapsed?</span>
    <span class="token symbol">:block/format</span>
    <span class="token symbol">:block/_refs</span>
    <span class="token symbol">:block/path-refs</span>
    <span class="token symbol">:block/tags</span>
    <span class="token symbol">:block/content</span>
    <span class="token symbol">:block/marker</span>
    <span class="token symbol">:block/priority</span>
    <span class="token symbol">:block/properties</span>
    <span class="token symbol">:block/pre-block?</span>
    <span class="token symbol">:block/scheduled</span>
    <span class="token symbol">:block/deadline</span>
    <span class="token symbol">:block/repeated?</span>
    <span class="token symbol">:block/created-at</span>
    <span class="token symbol">:block/updated-at</span>
    <span class="token symbol">:block/file</span>
    <span class="token symbol">:block/heading-level</span>
    <span class="token punctuation">{</span><span class="token symbol">:block/page</span>
      <span class="token punctuation">[</span><span class="token symbol">:db/id</span> <span class="token symbol">:block/name</span> <span class="token symbol">:block/original-name</span> <span class="token symbol">:block/journal-day</span> <span class="token symbol">:block/journal?</span><span class="token punctuation">]</span><span class="token punctuation">}</span>
    <span class="token punctuation">{</span><span class="token symbol">:block/refs</span>
      <span class="token punctuation">[</span><span class="token symbol">:block/journal-day</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token symbol">:where</span>
  <span class="token punctuation">[</span>?block <span class="token symbol">:block/marker</span> ?marker<span class="token punctuation">]</span>
  <span class="token punctuation">[</span>?rp <span class="token symbol">:block/journal?</span> <span class="token boolean">true</span><span class="token punctuation">]</span>
  <span class="token punctuation">[</span>?block <span class="token symbol">:block/refs</span> ?rp<span class="token punctuation">]</span>
  <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token keyword">contains?</span> <span class="token operator">#</span><span class="token punctuation">{</span><span class="token string">&quot;TODO&quot;</span> <span class="token string">&quot;DOING&quot;</span> <span class="token string">&quot;NOW&quot;</span> <span class="token string">&quot;LATER&quot;</span> <span class="token string">&quot;WAITING&quot;</span> <span class="token string">&quot;DONE&quot;</span><span class="token punctuation">}</span> ?marker<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Schedule Start: <code>refs[0].journal-day</code></p><p>Date Formatter: <code>yyyyMMdd</code></p><p><img src="`+o+'" alt=""></p><p>Calendar: <img src="'+t+`" alt=""></p><h2 id="exclude-specified-page-from-default-journal-calendar" tabindex="-1"><a class="header-anchor" href="#exclude-specified-page-from-default-journal-calendar" aria-hidden="true">#</a> Exclude specified page from default journal calendar</h2><p>Defaut journal calendar will search all pages, but you can exclude some pages by setting query script.</p><p>If you want to exclude a page named <code>your project</code>, you can add the following code to your query script:</p><div class="language-clojure line-numbers-mode" data-ext="clojure"><pre class="language-clojure"><code>  <span class="token punctuation">[</span>?page <span class="token symbol">:block/name</span> ?pname<span class="token punctuation">]</span>
  <span class="token punctuation">[</span>?block <span class="token symbol">:block/page</span> ?page<span class="token punctuation">]</span>
  <span class="token punctuation">(</span><span class="token keyword">not</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token keyword">contains?</span> <span class="token operator">#</span><span class="token punctuation">{</span><span class="token string">&quot;your project&quot;</span><span class="token punctuation">}</span> ?pname<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The original query script of query1 is as follows:</p><div class="language-clojure line-numbers-mode" data-ext="clojure"><pre class="language-clojure"><code><span class="token punctuation">[</span><span class="token symbol">:find</span> <span class="token punctuation">(</span><span class="token function">pull</span> ?block <span class="token punctuation">[</span>*<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token symbol">:where</span>
  <span class="token punctuation">[</span>?block <span class="token symbol">:block/marker</span> ?marker<span class="token punctuation">]</span>
  <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token function">missing?</span> $ ?block <span class="token symbol">:block/deadline</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
  <span class="token punctuation">(</span><span class="token keyword">not</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token function">missing?</span> $ ?block <span class="token symbol">:block/scheduled</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token keyword">contains?</span> <span class="token operator">#</span><span class="token punctuation">{</span><span class="token string">&quot;TODO&quot;</span> <span class="token string">&quot;DOING&quot;</span> <span class="token string">&quot;NOW&quot;</span> <span class="token string">&quot;LATER&quot;</span> <span class="token string">&quot;WAITING&quot;</span> <span class="token string">&quot;DONE&quot;</span><span class="token punctuation">}</span> ?marker<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The script after the modification is as follows:</p><div class="language-clojure line-numbers-mode" data-ext="clojure"><pre class="language-clojure"><code><span class="token punctuation">[</span><span class="token symbol">:find</span> <span class="token punctuation">(</span><span class="token function">pull</span> ?block <span class="token punctuation">[</span>*<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token symbol">:where</span>
  <span class="token punctuation">[</span>?block <span class="token symbol">:block/marker</span> ?marker<span class="token punctuation">]</span>
  <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token function">missing?</span> $ ?block <span class="token symbol">:block/deadline</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
  <span class="token punctuation">(</span><span class="token keyword">not</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token function">missing?</span> $ ?block <span class="token symbol">:block/scheduled</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">[</span>?page <span class="token symbol">:block/name</span> ?pname<span class="token punctuation">]</span>
  <span class="token punctuation">[</span>?block <span class="token symbol">:block/page</span> ?page<span class="token punctuation">]</span>
  <span class="token punctuation">(</span><span class="token keyword">not</span> <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token keyword">contains?</span> <span class="token operator">#</span><span class="token punctuation">{</span><span class="token string">&quot;your project&quot;</span><span class="token punctuation">}</span> ?pname<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token keyword">contains?</span> <span class="token operator">#</span><span class="token punctuation">{</span><span class="token string">&quot;TODO&quot;</span> <span class="token string">&quot;DOING&quot;</span> <span class="token string">&quot;NOW&quot;</span> <span class="token string">&quot;LATER&quot;</span> <span class="token string">&quot;WAITING&quot;</span> <span class="token string">&quot;DONE&quot;</span><span class="token punctuation">}</span> ?marker<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre><div class="highlight-lines"><br><br><br><br><br><div class="highlight-line"> </div><div class="highlight-line"> </div><div class="highlight-line"> </div><br></div><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,16);function y(g,h){const a=l("ExternalLinkIcon");return c(),i("div",null,[d,b,n("p",null,[n("a",m,[s("issue19"),u(a)])]),v])}const _=p(k,[["render",y],["__file","query.html.vue"]]);export{_ as default};
