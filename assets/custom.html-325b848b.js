import{_ as o,a as l,b as c,c as r,d as i}from"./customQueryCalendar-5423f38d.js";import{_ as p,M as d,p as u,q as h,R as e,t as n,N as s,a1 as t}from"./framework-204010b2.js";const m={},_=e("h1",{id:"common-custom-calendar",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#common-custom-calendar","aria-hidden":"true"},"#"),n(" Common custom calendar")],-1),k=e("div",{class:"custom-container tip"},[e("p",{class:"custom-container-title"},"TIP"),e("p",null,"Common custom calendar is a calendar that collects events based on query and displays them on the calendar.")],-1),b=e("p",null,"When we create a custom calendar, the behavior is the same as the default journal calendar, but the search scope is the page specified by the custom calendar ID.",-1),g=e("blockquote",null,[e("p",null,"The query of all calendars is open and modifiable, and you can customize it according to your needs.")],-1),f=e("p",null,"So how to create a custom calendar?",-1),y={href:"https://logseq.github.io/#/page/Queries",target:"_blank",rel:"noopener noreferrer"},v={href:"https://logseq.github.io/plugins/interfaces/IDBProxy.html#datascriptQuery",target:"_blank",rel:"noopener noreferrer"},q={href:"https://logseq.github.io/plugins/interfaces/IDBProxy.html#q",target:"_blank",rel:"noopener noreferrer"},w=e("p",null,"Let me explain what the configuration items are:",-1),x=e("li",null,[e("code",null,"script"),n(": As a parameter to datascriptQuery, query all block that meets the requirements.")],-1),Q=e("code",null,"query type",-1),T={href:"https://logseq.github.io/#/page/Queries",target:"_blank",rel:"noopener noreferrer"},I={href:"https://logseq.github.io/#/page/AdvancedQueries",target:"_blank",rel:"noopener noreferrer"},B=e("li",null,[e("code",null,"schedule start"),n(": Take the field specified by "),e("code",null,"schedule start"),n(" from the block of the datascriptQuery query as the event start time.")],-1),D=e("li",null,[e("code",null,"schedule end"),n(": Take the field specified by "),e("code",null,"schedule end"),n(" from the block of the datascriptQuery query as the event end time.")],-1),C=e("code",null,"date formatter",-1),A={href:"https://date-fns.org/v2.28.0/docs/parse",target:"_blank",rel:"noopener noreferrer"},N=e("code",null,"schedule start",-1),S=e("code",null,"schedule end",-1),j=e("li",null,[e("code",null,"is milestone"),n(": Whether the block is a milestone. If it is, the block will be displayed in the calendar as a milestone.")],-1),E=t('<p>If you don&#39;t konw how to fill <code>schedule start</code> <code>schedule end</code>, you can open DevTools and click the play button:</p><p><img src="'+l+'" alt="queryDebug"></p><h2 id="example" tabindex="-1"><a class="header-anchor" href="#example" aria-hidden="true">#</a> Example:</h2><p>Currently we have a test-agenda note:</p><p>where the custom calendar demo has the <code>start</code> <code>end</code> attribute, we want it to be displayed in the calendar and the common text is not.</p><p><img src="'+c+'" alt="test-agenda"></p>',6),P={id:"use-simple-query",tabindex:"-1"},V=e("a",{class:"header-anchor",href:"#use-simple-query","aria-hidden":"true"},"#",-1),L={href:"https://logseq.github.io/#/page/Queries",target:"_blank",rel:"noopener noreferrer"},U=e("p",null,"We use the following query script to query the block located in the test-agenda page:",-1),W=e("p",null,[e("code",null,'(and (page "test-agenda") (property end) (property start))')],-1),z=e("p",null,[e("img",{src:o,alt:"customQuerySimple"})],-1),M={id:"use-advanced-query",tabindex:"-1"},R=e("a",{class:"header-anchor",href:"#use-advanced-query","aria-hidden":"true"},"#",-1),F={href:"https://logseq.github.io/#/page/advanced%20queries",target:"_blank",rel:"noopener noreferrer"},G=t(`<p>If you want to use the advanced query, you can use the following script:</p><div class="language-clojure line-numbers-mode" data-ext="clojure"><pre class="language-clojure"><code><span class="token punctuation">[</span><span class="token symbol">:find</span> <span class="token punctuation">(</span><span class="token function">pull</span> ?block <span class="token punctuation">[</span>*<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token symbol">:where</span>
  <span class="token punctuation">[</span>?block <span class="token symbol">:block/properties</span> ?p<span class="token punctuation">]</span>
  <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token keyword">get</span> ?p <span class="token symbol">:start</span><span class="token punctuation">)</span> ?s<span class="token punctuation">]</span>
  <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token keyword">get</span> ?p <span class="token symbol">:end</span><span class="token punctuation">)</span> ?e<span class="token punctuation">]</span>
  <span class="token punctuation">[</span>?page <span class="token symbol">:block/name</span> ?pname<span class="token punctuation">]</span>
  <span class="token punctuation">[</span>?block <span class="token symbol">:block/page</span> ?page<span class="token punctuation">]</span>
  <span class="token punctuation">[</span><span class="token punctuation">(</span><span class="token keyword">contains?</span> <span class="token operator">#</span><span class="token punctuation">{</span><span class="token string">&quot;test-agenda&quot;</span><span class="token punctuation">}</span> ?pname<span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The complete configuration is as follows:</p><p><img src="`+r+'" alt="customQuery"></p><p>The above two methods are equivalent .The following will appear:</p><p><img src="'+i+'" alt="customCalendar"></p>',6);function H(J,K){const a=d("ExternalLinkIcon");return u(),h("div",null,[_,k,b,g,f,e("p",null,[n("Click the add calendar button, and fill in the calendar name, and edit "),e("a",y,[n("query"),s(a)]),n(".")]),e("p",null,[n("The plugin will call "),e("a",v,[n("logseq.DB.datascriptQuery"),s(a)]),n(" or "),e("a",q,[n("logseq.DB.q"),s(a)]),n(" API with the query you specified. and the result will be displayed in the calendar.")]),w,e("ol",null,[x,e("li",null,[Q,n(": The type of query, can be "),e("a",T,[n("Simple Query"),s(a)]),n(" or "),e("a",I,[n("Advanced Query"),s(a)]),n(".")]),B,D,e("li",null,[C,n(": The date formatter. Use this as "),e("a",A,[n("date-fns"),s(a)]),n(" parameter to convert "),N,n(),S,n(" to an available date.")]),j]),E,e("h3",P,[V,n(" Use "),e("a",L,[n("Simple Query"),s(a)])]),U,W,z,e("h3",M,[R,n(" Use "),e("a",F,[n("Advanced Query"),s(a)])]),G])}const Y=p(m,[["render",H],["__file","custom.html.vue"]]);export{Y as default};
